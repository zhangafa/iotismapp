(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/order/adjust-order"],{"0e9d":function(e,t,a){"use strict";var r=a("2c1d"),i=a.n(r);i.a},"2c1d":function(e,t,a){},3783:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a("2f62"),i=a("7ae6"),n=o(a("29af"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),r.forEach(function(t){c(e,t,a[t])})}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u=function(){return a.e("components/tui/tui-datetime").then(a.bind(null,"25d4"))},s=function(){return a.e("components/robby-image-upload/robby-image-upload").then(a.bind(null,"924e"))},d=a("f8ab"),f={components:{tuiDatetime:u,robbyImageUpload:s},computed:l({},(0,r.mapState)(["selectOrder"])),onLoad:function(e){try{if(e.data==this.selectOrder.id){if(this.projectItem=this.selectOrder,this.projectItem.templateURL){var t=[],a=this.projectItem.templateURL.split("?");this.getQueryString("queryPartEtlId",a[1]),this.getQueryString("createOrderEtlId",a[1]),this.getQueryString("queryCustomerEtlId",a[1]);"配件下单"==this.projectItem.taskConfigName&&(t.push(this.createAttrDef({dataType:"ERPCustomer",name:"选择客户"})),t.push(this.createAttrDef({dataType:"ERPParts",name:"选择配件"}))),this.projectItem.attributeDefinitions=t}this.projectItem.attributeDefinitions.forEach(function(e){"select"==e.dataType&&(e.rangeAry=e.dynamicValue?e.dynamicValue:JSON.parse(e.selectValue),e.selectLabel="请选择"),e.relation&&(e.isRelation=!1)}),this.attributeList=this.projectItem.attributeDefinitions}}catch(r){this.projectItem={}}},data:function(){return{attributeList:[],startYear:(new Date).getFullYear(),endYear:2050,cancelColor:"#888",color:"#5677fc",setDateTime:"",placeholder:"请选择日期时间",projectItem:{applyTime:"",area:"",createTime:"",addr:""},areaIndex:-1,addrIndex:-1,areaList:["省内","省外"],addrList:["四川","广东","安徽"],areaMap:{"省内":0,"省外":1},addrMap:{"四川":0,"广东":1,"安徽":2},formRule:[],relationDic:{},enableDel:!0,enableAdd:!0,enableDrag:!1,limitNumber:8,imageData:[],serverUrl:n.default.config.baseUrl+"api/rest/upload/resourceFileUIService/uploadResourceFile",formData:{resourceId:100,type:encodeURIComponent("ticket")},header:{cookie:n.default.config.header.cookie}}},methods:l({},(0,r.mapMutations)(["setSelectOrder"]),{getQueryString:i.getQueryString,deleteImage:function(e){console.log(e)},addImage:function(e){console.log(e)},showApplyTime:function(){this.$refs.applyDateTimeRef.show()},showCreateTime:function(){this.$refs.createDateTimeRef.show()},getApplyTime:function(e){this.projectItem.applyTime=e.result},getCreateTime:function(e){this.projectItem.createTime=e.result},createAttrDef:function(e){var t={dataType:"select",label:"dispatch",lineNumber:"two",lookStatus:"edit",name:"名称",relation:"",reorder:"",required:"yes",selectExpression:"",selectValue:[]};return t=l({},t,e),t},areaPickerChange:function(e){this.areaIndex=e.detail.value,this.projectItem.area=this.areaList[this.areaIndex]},addrPickerChange:function(e){this.addrIndex=e.detail.value,this.projectItem.addr=this.addrList[this.addrIndex]},pickerChange:function(e){var t=this,a=e.currentTarget.dataset.index;this.attributeList.forEach(function(r){if(r.label==a){var i=r.rangeAry[Number(e.detail.value)];r.selectLabel=i.label,r[r.label]=i.value||i.label,t.relationDic[r.label]=r[r.label]}if(r.relation){var n=r.relation.split(":");t.relationDic[n[0]]==n[1]?r.isRelation=!0:r.label!=n[0]&&(r.isRelation=!1)}}),this.$forceUpdate()},cancelClick:function(){e.navigateBack({delta:1})},updateQuery:function(){var t=getCurrentPages(),a=t[t.length-2];a.isDoRefresh=!0,setTimeout(function(){e.reLaunch({url:"/pages/index/index"})},1e3)},saveClick:function(){var t=this;if(this.projectItem||this.projectItem.id){var a={};this.attributeList.forEach(function(e){a[e.label]=e[e.label],"yes"==e.required&&(!e.relation||e.relation&&e.isRelation)&&t.formRule.push({name:e.label,checkType:"notnull",checkRule:"",errorMsg:"请选择"+e.name})});var r=d.check(a,this.formRule);if(r){var i=l({},this.projectItem);i.values=this.relationDic,i.taskStatus=200,e.showLoading({title:"正在提交数据..."}),this.$api.doTask(i).then(function(a){e.hideLoading(),e.showToast({title:"处理成功！",icon:"success"}),t.updateQuery()})}else e.showToast({title:d.error,icon:"none"})}else e.showToast({title:"请选择一个待处理工单！",icon:"none"})}})};t.default=f}).call(this,a("543d")["default"])},"37d1":function(e,t,a){"use strict";a.r(t);var r=a("8af8"),i=a("79a2");for(var n in i)"default"!==n&&function(e){a.d(t,e,function(){return i[e]})}(n);a("0e9d");var o=a("2877"),l=Object(o["a"])(i["default"],r["a"],r["b"],!1,null,null,null);t["default"]=l.exports},"79a2":function(e,t,a){"use strict";a.r(t);var r=a("3783"),i=a.n(r);for(var n in r)"default"!==n&&function(e){a.d(t,e,function(){return r[e]})}(n);t["default"]=i.a},"8af8":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement;e._self._c},i=[];a.d(t,"a",function(){return r}),a.d(t,"b",function(){return i})},cacd:function(e,t,a){"use strict";(function(e){a("e9d6"),a("921b");r(a("66fd"));var t=r(a("37d1"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])}},[["cacd","common/runtime","common/vendor"]]]);